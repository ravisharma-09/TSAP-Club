<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Club Dashboard | TSAP Club</title>
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;800&display=swap" rel="stylesheet">
  <!-- Styles -->
  <link rel="stylesheet" href="style.css">
  <!-- Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body>
  <!-- Background Animation -->
  <canvas id="matrixCanvas"></canvas>

  <!-- Navigation -->
  <nav class="navbar">
    <div class="container navbar-container">
      <a href="index.html" class="logo">
        <span class="logo-icon"><i data-lucide="code-2"></i></span>
        T.S.A.P CP Club
      </a>
      <div class="nav-links desktop-only">
        <a href="index.html" class="nav-item">Home</a>
        <a href="https://docs.google.com/forms/d/e/1FAIpQLScMBkN6E3mqvOYs9lWYav1lJfgvjLX-mVqycmUPIYdgJL_bQg/viewform?usp=dialog"
          target="_blank" class="nav-item">Join Club</a>
        <a href="achievements.html" class="nav-item">Achievements</a>
        <a href="dashboard.html" class="nav-item active">Dashboard</a>
        <a href="login.html" class="nav-item">Login</a>
      </div>
      <div class="nav-actions">
        <button class="menu-toggle" aria-label="Toggle menu">
          <i data-lucide="menu"></i>
        </button>
      </div>
    </div>
    <!-- Mobile Menu -->
    <div class="mobile-menu">
      <a href="index.html" class="nav-item">Home</a>
      <a href="https://docs.google.com/forms/d/e/1FAIpQLScMBkN6E3mqvOYs9lWYav1lJfgvjLX-mVqycmUPIYdgJL_bQg/viewform?usp=dialog"
        target="_blank" class="nav-item">Join Club</a>
      <a href="achievements.html" class="nav-item">Achievements</a>
      <a href="dashboard.html" class="nav-item active">Dashboard</a>
      <a href="login.html" class="nav-item">Login</a>
    </div>
  </nav>

  <!-- Hero Banner Section -->
  <section class="dashboard-hero">
    <div class="container">
      <div class="dashboard-hero-content">
        <div class="dashboard-icon">
          <i data-lucide="bar-chart-2"></i>
        </div>
        <h1 class="text-gradient">Club Dashboard</h1>
        <p class="text-secondary">Track our collective journey in competitive programming</p>
      </div>
    </div>
  </section>

  <!-- Club Stats Summary -->
  <section class="club-stats-section">
    <div class="container">
      <div class="stats-grid-4">
        <div class="glass-card stat-card">
          <div class="stat-icon">
            <i data-lucide="users"></i>
          </div>
          <h3 class="stat-number">50+</h3>
          <p class="stat-label">MEMBERS</p>
        </div>
        <div class="glass-card stat-card">
          <div class="stat-icon">
            <i data-lucide="code"></i>
          </div>
          <h3 class="stat-number">12,000+</h3>
          <p class="stat-label">PROBLEMS SOLVED</p>
        </div>
        <div class="glass-card stat-card">
          <div class="stat-icon">
            <i data-lucide="calendar"></i>
          </div>
          <h3 class="stat-number">Daily</h3>
          <p class="stat-label">CONTESTS</p>
        </div>
        <div class="glass-card stat-card">
          <div class="stat-icon">
            <i data-lucide="link"></i>
          </div>
          <h3 class="stat-number">25+</h3>
          <p class="stat-label">PLATFORMS</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Milestones Timeline -->
  <section class="milestones-section">
    <div class="container">
      <h2 class="section-title">Club Milestones</h2>
      <p class="section-subtitle">Unlock rewards as we solve more problems together</p>
      <div class="glass-card timeline-container">
        <div class="timeline">
          <div class="milestone completed" data-threshold="800">
            <div class="milestone-marker">
              <i data-lucide="check"></i>
            </div>
            <div class="milestone-content">
              <div class="milestone-reward-icon">üç´</div>
              <h3 class="milestone-number">800</h3>
              <span class="milestone-badge achieved">Achieved</span>
              <p class="milestone-reward">Chocolate Treat</p>
              <p class="milestone-date">Oct 2025</p>
            </div>
          </div>
          <div class="timeline-line completed"></div>

          <div class="milestone completed" data-threshold="1200">
            <div class="milestone-marker">
              <i data-lucide="check"></i>
            </div>
            <div class="milestone-content">
              <div class="milestone-reward-icon">üéÇ</div>
              <h3 class="milestone-number">1200</h3>
              <span class="milestone-badge achieved">Achieved</span>
              <p class="milestone-reward">Cake Cutting</p>
              <p class="milestone-date">Nov 2025</p>
            </div>
          </div>
          <div class="timeline-line completed"></div>

          <div class="milestone completed" data-threshold="2000">
            <div class="milestone-marker">
              <i data-lucide="check"></i>
            </div>
            <div class="milestone-content">
              <div class="milestone-reward-icon">üçî</div>
              <h3 class="milestone-number">2000</h3>
              <span class="milestone-badge achieved">Achieved</span>
              <p class="milestone-reward">Burger Treat</p>
              <p class="milestone-date">Dec 2025</p>
            </div>
          </div>
          <div class="timeline-line"></div>

          <div class="milestone current" data-threshold="4000">
            <div class="milestone-marker pulse">
              <i data-lucide="target"></i>
            </div>
            <div class="milestone-content">
              <div class="milestone-reward-icon">üëï</div>
              <h3 class="milestone-number">4000</h3>
              <span class="milestone-badge next">Next Goal</span>
              <p class="milestone-reward">T-Shirts Distribution</p>
              <p class="milestone-date">In Progress</p>
            </div>
          </div>
          <div class="timeline-line"></div>

          <div class="milestone locked" data-threshold="7000">
            <div class="milestone-marker">
              <i data-lucide="lock"></i>
            </div>
            <div class="milestone-content">
              <div class="milestone-reward-icon">üéí</div>
              <h3 class="milestone-number">7000</h3>
              <span class="milestone-badge">Locked</span>
              <p class="milestone-reward">Swag Bag</p>
              <p class="milestone-date">Not Yet</p>
            </div>
          </div>
          <div class="timeline-line"></div>

          <div class="milestone locked" data-threshold="10000">
            <div class="milestone-marker">
              <i data-lucide="lock"></i>
            </div>
            <div class="milestone-content">
              <div class="milestone-reward-icon">üèÜ</div>
              <h3 class="milestone-number">10000</h3>
              <span class="milestone-badge">Locked</span>
              <p class="milestone-reward">Trophy + Grand Party</p>
              <p class="milestone-date">Not Yet</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Individual Achievements Section -->
  <section class="achievements-section">
    <div class="container">
      <h2 class="section-title">Individual Achievements</h2>
      <p class="section-subtitle">Track how our members are progressing individually</p>
      <div class="achievements-grid">
        <!-- Achievement cards will be dynamically populated -->
      </div>
    </div>
  </section>

  <!-- Active Members Grid -->
  <section class="members-section">
    <div class="container">
      <h2 class="section-title">Active Members</h2>
      <div class="members-grid">
        <!-- Member Card 1 -->
        <div class="glass-card member-card">
          <div class="member-avatar">
            <div class="avatar-circle">AC</div>
          </div>
          <h3 class="member-name">Aryan Chauhan</h3>
          <span class="member-role admin">Admin</span>
          <div class="member-stats">
            <div class="platform-stat">
              <i data-lucide="code"></i>
              <span>CF: 1450</span>
            </div>
            <div class="platform-stat">
              <i data-lucide="terminal"></i>
              <span>LC: 234</span>
            </div>
          </div>

          <!-- Achievement Status -->
          <div class="member-achievement">
            <div class="achievement-badge-small">ü•á</div>
            <div class="achievement-info">
              <span class="achievement-tier">Gold Solver</span>
              <span class="achievement-problems">450 problems</span>
            </div>
          </div>

          <!-- Progress to Next Achievement -->
          <div class="member-progress">
            <div class="progress-header">
              <span class="progress-label">Progress to Platinum</span>
              <span class="progress-count">450/600</span>
            </div>
            <div class="progress-bar-container">
              <div class="progress-bar-fill" style="width: 75%"></div>
            </div>
          </div>

          <p class="member-joined">Joined Sep 2025</p>
        </div>

        <!-- Member Card 2 -->
        <div class="glass-card member-card">
          <div class="member-avatar">
            <div class="avatar-circle">RS</div>
          </div>
          <h3 class="member-name">Ravi Sharma</h3>
          <span class="member-role admin">Admin</span>
          <div class="member-stats">
            <div class="platform-stat">
              <i data-lucide="code"></i>
              <span>CF: 1380</span>
            </div>
            <div class="platform-stat">
              <i data-lucide="terminal"></i>
              <span>LC: 189</span>
            </div>
          </div>

          <!-- Achievement Status -->
          <div class="member-achievement">
            <div class="achievement-badge-small">ü•á</div>
            <div class="achievement-info">
              <span class="achievement-tier">Gold Solver</span>
              <span class="achievement-problems">380 problems</span>
            </div>
          </div>

          <!-- Progress to Next Achievement -->
          <div class="member-progress">
            <div class="progress-header">
              <span class="progress-label">Progress to Platinum</span>
              <span class="progress-count">380/600</span>
            </div>
            <div class="progress-bar-container">
              <div class="progress-bar-fill" style="width: 63%"></div>
            </div>
          </div>

          <p class="member-joined">Joined Sep 2025</p>
        </div>

        <!-- Member Card 3 -->
        <div class="glass-card member-card">
          <div class="member-avatar">
            <div class="avatar-circle">AB</div>
          </div>
          <h3 class="member-name">Ankur Bhadauria</h3>
          <span class="member-role admin">Admin</span>
          <div class="member-stats">
            <div class="platform-stat">
              <i data-lucide="code"></i>
              <span>CF: 1520</span>
            </div>
            <div class="platform-stat">
              <i data-lucide="terminal"></i>
              <span>LC: 267</span>
            </div>
          </div>

          <!-- Achievement Status -->
          <div class="member-achievement">
            <div class="achievement-badge-small">ü•á</div>
            <div class="achievement-info">
              <span class="achievement-tier">Gold Solver</span>
              <span class="achievement-problems">520 problems</span>
            </div>
          </div>

          <!-- Progress to Next Achievement -->
          <div class="member-progress">
            <div class="progress-header">
              <span class="progress-label">Progress to Platinum</span>
              <span class="progress-count">520/600</span>
            </div>
            <div class="progress-bar-container">
              <div class="progress-bar-fill" style="width: 87%"></div>
            </div>
          </div>

          <p class="member-joined">Joined Sep 2025</p>
        </div>

        <!-- Member Card 4 -->
        <div class="glass-card member-card">
          <div class="member-avatar">
            <div class="avatar-circle">JK</div>
          </div>
          <h3 class="member-name">Jothin Kumar</h3>
          <span class="member-role member">Member</span>
          <div class="member-stats">
            <div class="platform-stat">
              <i data-lucide="code"></i>
              <span>CF: 1290</span>
            </div>
            <div class="platform-stat">
              <i data-lucide="terminal"></i>
              <span>LC: 156</span>
            </div>
          </div>

          <!-- Achievement Status -->
          <div class="member-achievement">
            <div class="achievement-badge-small">ü•à</div>
            <div class="achievement-info">
              <span class="achievement-tier">Silver Solver</span>
              <span class="achievement-problems">290 problems</span>
            </div>
          </div>

          <!-- Progress to Next Achievement -->
          <div class="member-progress">
            <div class="progress-header">
              <span class="progress-label">Progress to Gold</span>
              <span class="progress-count">290/300</span>
            </div>
            <div class="progress-bar-container">
              <div class="progress-bar-fill" style="width: 97%"></div>
            </div>
          </div>

          <p class="member-joined">Joined Oct 2025</p>
        </div>

        <!-- Member Card 5 -->
        <div class="glass-card member-card">
          <div class="member-avatar">
            <div class="avatar-circle">SM</div>
          </div>
          <h3 class="member-name">Sarah Miller</h3>
          <span class="member-role member">Member</span>
          <div class="member-stats">
            <div class="platform-stat">
              <i data-lucide="code"></i>
              <span>CF: 1150</span>
            </div>
            <div class="platform-stat">
              <i data-lucide="terminal"></i>
              <span>LC: 198</span>
            </div>
          </div>

          <!-- Achievement Status -->
          <div class="member-achievement">
            <div class="achievement-badge-small">ü•à</div>
            <div class="achievement-info">
              <span class="achievement-tier">Silver Solver</span>
              <span class="achievement-problems">198 problems</span>
            </div>
          </div>

          <!-- Progress to Next Achievement -->
          <div class="member-progress">
            <div class="progress-header">
              <span class="progress-label">Progress to Gold</span>
              <span class="progress-count">198/300</span>
            </div>
            <div class="progress-bar-container">
              <div class="progress-bar-fill" style="width: 66%"></div>
            </div>
          </div>

          <p class="member-joined">Joined Oct 2025</p>
        </div>

        <!-- Member Card 6 -->
        <div class="glass-card member-card">
          <div class="member-avatar">
            <div class="avatar-circle">DK</div>
          </div>
          <h3 class="member-name">David Kim</h3>
          <span class="member-role member">Member</span>
          <div class="member-stats">
            <div class="platform-stat">
              <i data-lucide="code"></i>
              <span>CF: 1340</span>
            </div>
            <div class="platform-stat">
              <i data-lucide="terminal"></i>
              <span>LC: 223</span>
            </div>
          </div>

          <!-- Achievement Status -->
          <div class="member-achievement">
            <div class="achievement-badge-small">ü•à</div>
            <div class="achievement-info">
              <span class="achievement-tier">Silver Solver</span>
              <span class="achievement-problems">223 problems</span>
            </div>
          </div>

          <!-- Progress to Next Achievement -->
          <div class="member-progress">
            <div class="progress-header">
              <span class="progress-label">Progress to Gold</span>
              <span class="progress-count">223/300</span>
            </div>
            <div class="progress-bar-container">
              <div class="progress-bar-fill" style="width: 74%"></div>
            </div>
          </div>

          <p class="member-joined">Joined Nov 2025</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Recent Activity Feed -->
  <section class="activity-section">
    <div class="container">
      <h2 class="section-title">Recent Activity</h2>
      <div class="activity-feed">
        <div class="glass-card activity-item">
          <div class="activity-icon milestone-icon">
            <i data-lucide="trophy"></i>
          </div>
          <div class="activity-content">
            <p class="activity-message">Club reached 1000 rating milestone</p>
            <span class="activity-time">2 days ago</span>
          </div>
        </div>

        <div class="glass-card activity-item">
          <div class="activity-icon growth-icon">
            <i data-lucide="trending-up"></i>
          </div>
          <div class="activity-content">
            <p class="activity-message">5 new members joined this week</p>
            <span class="activity-time">3 days ago</span>
          </div>
        </div>

        <div class="glass-card activity-item">
          <div class="activity-icon achievement-icon">
            <i data-lucide="target"></i>
          </div>
          <div class="activity-content">
            <p class="activity-message">Club solved 500+ problems this month</p>
            <span class="activity-time">1 week ago</span>
          </div>
        </div>

        <div class="glass-card activity-item">
          <div class="activity-icon streak-icon">
            <i data-lucide="flame"></i>
          </div>
          <div class="activity-content">
            <p class="activity-message">Daily contest streak: 30 days</p>
            <span class="activity-time">2 weeks ago</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer style="border-top: 1px solid var(--glass-border); padding: 3rem 0; margin-top: 4rem;">
    <div class="container" style="display: flex; justify-content: space-between; flex-wrap: wrap; gap: 2rem;">
      <div>
        <a href="index.html" class="logo" style="margin-bottom: 1rem; display: inline-block;">
          TSAP CLUB
        </a>
        <p class="text-secondary">Elevating the coding culture.</p>
      </div>
      <div style="display: flex; gap: 2rem;">
        <a href="#" class="text-secondary">GitHub</a>
        <a href="#" class="text-secondary">Discord</a>
        <a href="#" class="text-secondary">Contact</a>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="visuals.js"></script>
  <script src="auth.js"></script>
  <script>
    // Initialize Lucide icons
    lucide.createIcons();

    // Mobile Menu Toggle
    const menuToggle = document.querySelector('.menu-toggle');
    const mobileMenu = document.querySelector('.mobile-menu');

    menuToggle.addEventListener('click', () => {
      mobileMenu.classList.toggle('active');
      const icon = mobileMenu.classList.contains('active') ? 'x' : 'menu';
      menuToggle.innerHTML = `<i data-lucide="${icon}"></i>`;
      lucide.createIcons();
    });

    // ========== LOAD REAL DATA FROM API ==========

    /**
     * Load club statistics from API
     */
    async function loadClubStats() {
      try {
        const response = await fetch('/api/club/stats');
        if (!response.ok) throw new Error('Failed to fetch club stats');

        const data = await response.json();
        console.log('[Dashboard] Club stats loaded:', data);

        // Update stats cards
        updateStatsCards(data);

        // Update milestones
        updateMilestones(data.milestones);

        // Update members grid (if available)
        if (data.members) {
          updateMembersGrid(data.members);
        }

      } catch (error) {
        console.error('[Dashboard] Failed to load club stats:', error);
        // Keep static data as fallback
      }
    }

    /**
     * Update stats cards with real data
     */
    function updateStatsCards(data) {
      const statCards = document.querySelectorAll('.stat-card');

      // Members
      if (statCards[0] && data.totalMembers !== undefined) {
        statCards[0].querySelector('.stat-number').textContent = `${data.totalMembers}+`;
      }

      // Problems Solved
      if (statCards[1] && data.totalProblemsSolved !== undefined) {
        statCards[1].querySelector('.stat-number').textContent =
          data.totalProblemsSolved >= 1000
            ? `${(data.totalProblemsSolved / 1000).toFixed(1)}k+`
            : `${data.totalProblemsSolved}+`;
      }

      // Contest Streak
      if (statCards[2] && data.contestStreak !== undefined) {
        statCards[2].querySelector('.stat-number').textContent =
          data.contestStreak > 0 ? `${data.contestStreak} days` : 'Daily';
      }

      // Platforms (keep static for now)
      // statCards[3] remains as is
    }

    /**
     * Update milestones timeline with real achievement data
     */
    function updateMilestones(milestones) {
      if (!milestones || !Array.isArray(milestones)) return;

      const milestoneElements = document.querySelectorAll('.milestone');

      // Map milestone data to include reward icons
      const rewardMapping = {
        800: { icon: 'üç´', label: 'Chocolate Treat' },
        1200: { icon: 'üéÇ', label: 'Cake Cutting' },
        2000: { icon: 'üçî', label: 'Burger Treat' },
        4000: { icon: 'üëï', label: 'T-Shirts Distribution' },
        7000: { icon: 'üéí', label: 'Swag Bag' },
        10000: { icon: 'üèÜ', label: 'Trophy + Grand Party' }
      };

      milestones.forEach((milestone, index) => {
        if (!milestoneElements[index]) return;

        const element = milestoneElements[index];
        const marker = element.querySelector('.milestone-marker');
        const badge = element.querySelector('.milestone-badge');
        const dateEl = element.querySelector('.milestone-date');
        const rewardIconEl = element.querySelector('.milestone-reward-icon');
        const rewardLabelEl = element.querySelector('.milestone-reward');

        // Update reward icon and label
        const rewardData = rewardMapping[milestone.threshold];
        if (rewardData && rewardIconEl) {
          rewardIconEl.textContent = rewardData.icon;
        }
        if (rewardData && rewardLabelEl) {
          rewardLabelEl.textContent = rewardData.label;
        }

        // Remove all state classes first
        element.classList.remove('completed', 'current', 'locked');
        marker.classList.remove('pulse');

        // Update classes based on achievement status
        if (milestone.achieved) {
          // Achieved milestone
          element.classList.add('completed');

          // Update badge
          if (badge) {
            badge.textContent = 'Achieved';
            badge.classList.add('achieved');
            badge.classList.remove('next');
          }

          // Update date
          if (dateEl && milestone.date) {
            const date = new Date(milestone.date);
            dateEl.textContent = date.toLocaleDateString('en-US', { month: 'short', year: 'numeric' });
          }

          // Update icon to checkmark
          const icon = marker.querySelector('i');
          if (icon) {
            icon.setAttribute('data-lucide', 'check');
          }
        } else {
          // Check if this is the next milestone or a future one
          const previousMilestone = milestones[index - 1];
          const isNextMilestone = index === 0 || (previousMilestone && previousMilestone.achieved);

          if (isNextMilestone) {
            // This is the current/next milestone
            element.classList.add('current');
            marker.classList.add('pulse');

            if (badge) {
              badge.textContent = 'Next Goal';
              badge.classList.add('next');
              badge.classList.remove('achieved');
            }

            if (dateEl) {
              // Show progress percentage if available
              if (milestone.progress) {
                dateEl.textContent = `${Math.round(milestone.progress)}% Complete`;
              } else {
                dateEl.textContent = 'In Progress';
              }
            }

            // Update icon to target
            const icon = marker.querySelector('i');
            if (icon) {
              icon.setAttribute('data-lucide', 'target');
            }
          } else {
            // This is a future/locked milestone
            element.classList.add('locked');

            if (badge) {
              badge.textContent = 'Locked';
              badge.classList.remove('achieved', 'next');
            }

            if (dateEl) {
              dateEl.textContent = 'Not Yet';
            }

            // Update icon to lock
            const icon = marker.querySelector('i');
            if (icon) {
              icon.setAttribute('data-lucide', 'lock');
            }
          }
        }

        // Update timeline line
        const timelineLine = element.nextElementSibling;
        if (timelineLine && timelineLine.classList.contains('timeline-line')) {
          if (milestone.achieved) {
            timelineLine.classList.add('completed');
          } else {
            timelineLine.classList.remove('completed');
          }
        }
      });

      // Re-initialize Lucide icons
      lucide.createIcons();
    }

    /**
     * Load and display recent activities
     */
    async function loadRecentActivities() {
      try {
        const response = await fetch('/api/activity/recent?limit=10');
        if (!response.ok) throw new Error('Failed to fetch activities');

        const activities = await response.json();
        console.log('[Dashboard] Activities loaded:', activities);

        updateActivityFeed(activities);

      } catch (error) {
        console.error('[Dashboard] Failed to load activities:', error);
        // Keep static activities as fallback
      }
    }

    /**
     * Update activity feed with real data
     */
    function updateActivityFeed(activities) {
      const feedContainer = document.querySelector('.activity-feed');
      if (!feedContainer || !activities || activities.length === 0) return;

      // Clear existing activities
      feedContainer.innerHTML = '';

      // Add new activities
      activities.forEach(activity => {
        const activityItem = document.createElement('div');
        activityItem.className = 'glass-card activity-item';

        activityItem.innerHTML = `
          <div class="activity-icon ${activity.iconClass || 'milestone-icon'}">
            <i data-lucide="${activity.icon || 'trophy'}"></i>
          </div>
          <div class="activity-content">
            <p class="activity-message">${activity.message}</p>
            <span class="activity-time">${activity.timeAgo || 'recently'}</span>
          </div>
        `;

        feedContainer.appendChild(activityItem);
      });

      // Re-initialize Lucide icons
      lucide.createIcons();
    }

    /**
     * Load and display individual achievements
     */
    async function loadIndividualAchievements() {
      try {
        const response = await fetch('/api/dashboard/members');
        if (!response.ok) throw new Error('Failed to fetch member tiers');

        const data = await response.json();
        console.log('[Dashboard] Individual achievements loaded:', data);

        updateAchievementsGrid(data.tiers, data.totalMembers);

      } catch (error) {
        console.error('[Dashboard] Failed to load individual achievements:', error);
      }
    }

    /**
     * Update achievements grid with tier data
     */
    function updateAchievementsGrid(tiers, totalMembers) {
      const gridContainer = document.querySelector('.achievements-grid');
      if (!gridContainer || !tiers) return;

      // Clear existing content
      gridContainer.innerHTML = '';

      // Create achievement card for each tier
      tiers.forEach(tier => {
        const card = document.createElement('div');
        card.className = `glass-card achievement-card tier-${tier.level.toLowerCase().replace(/\s+/g, '-').replace('‚≠ê', '')}`;

        const requirementText = tier.max
          ? `${tier.min}‚Äì${tier.max} problems`
          : `${tier.min}+ problems`;

        card.innerHTML = `
          <div class="achievement-badge">${tier.badge}</div>
          <h3 class="achievement-level">${tier.level}</h3>
          <p class="achievement-requirement">${requirementText}</p>
          <div class="achievement-count">
            <span class="count-number">${tier.count}</span>
            <span class="count-label">member${tier.count !== 1 ? 's' : ''}</span>
          </div>
          <div class="achievement-progress-container">
            <div class="achievement-progress-bar" style="--progress: ${tier.percentage}%"></div>
          </div>
          <p class="achievement-percentage">${tier.percentage.toFixed(1)}% of club</p>
        `;

        gridContainer.appendChild(card);
      });

      // Trigger animation after a brief delay
      setTimeout(() => {
        document.querySelectorAll('.achievement-progress-bar').forEach(bar => {
          bar.classList.add('animate');
        });
      }, 100);
    }

    // Load data on page load
    document.addEventListener('DOMContentLoaded', () => {
      console.log('[Dashboard] Loading real data...');
      loadClubStats();
      loadRecentActivities();
      loadIndividualAchievements();
    });
  </script>
</body>

</html>